<!DOCTYPE html>
<html>
<head>
	<title>STREAK CODING</title>
	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="css/request.css">
	<link rel="stylesheet" href="css/userlogin.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <ul>
  		<li style="float:left;margin-left:20px;"><a id="streak_coding" class="active" style="text-decoration:none;">STREAK CODING</a></li>
  		<li style="float:right;margin-right:10px" id="flip"><a class="active" style="text-decoration:none;" href="leaderboard.html">Leaderboard</a></li>
	</ul>
	<style type="text/css">
		hr{
			border-color: #696464;
		}
		body {
			font-family: 'Roboto', sans-serif;
		}
	</style>
</head>
<body>
	<div id="navbar" style="z-index:1000;position:relative;width:auto;height:auto;"></div>
	<div class="data" id="data" style="margin-left:0%;margin-right:25%;">
		<h2 id="heading">Enter your password!</h2><hr>
		<input type="password" id="password" name="password" placeholder="Your password for round 2!" class="form-control"><br>
		<input type="password" id="UID" name="UID" placeholder="Enter your UID" class="form-control"><br>
		<h4><b>Note:</b> Please ensure that you enter the right password,<br>&nbspeach wrong entry causes reduction in score!</h4>
		<div id="errormsg" class="alert-danger"></div><br>
		<input type="submit" id="submit" class="btn btn-primary" value="Submit"/>
	</div>
</body>
<script type="text/javascript">
	$("#errormsg").html("");
	$("#submit").click(function(event) {
		var pass = $("#password").val();
		var uid = $("#UID").val();
		$("#errormsg").html("");
		if($.trim(pass)=="" || $.trim(uid)=="")
		{
			$("#errormsg").html("Empty fields!");
		}
		else
		{
			$("#errormsg").html("");
			pass  = "password="+pass+"&uid="+uid;
			$.ajax({
			type:"POST",
			url: "/getAllCandidates",
			contentType: 'application/x-www-form-urlencoded',
            data: pass,
			success: function(data) {
				if(/\d+/.test(data))
					$("#errormsg").html("Incorrect password! Attempt no:"+data);
				else if(data=="no") {
					$("#errormsg").html("Incorrect UID! No such participant.");
				}
				else if(data=="warning"){
					$("#uid").remove();
					$("#password").remove();
					$("heading").html("Warning!!");
					$("#data").append("<h6>You have already entered the password. <br>Stop fiddling around (Warnings will affect your score).</h6>");
				}
				else if(data=="congrats"){
					$("#uid").remove();
					$("#password").remove();
					$("heading").html("Congratulations!!");
					$("#data").append("<h6>This is your link for Round 2: link</h6>");
				}
					
			}
		});
		}
	});
</script>
</html>